spack:
  view: false

  concretizer:
    unify: when_possible

  config:
    install_tree:
      root: ./opt/spack

  specs:
  - python@3.11
  - py-pip
  - py-setuptools
  - py-pkgconfig
  - py-wheel
  - py-numpy@1.26.4

  - hdf5@1.14.5 +mpi
  - py-h5py@3.12.1 +mpi
  - py-icesee

  # firedrake dependencies
  - py-cython
  - ninja
  - pkgconf

  # install petsc v3.24.0 with spack
  - petsc@3.24.0 +mpi +shared +fortran ~fortran-bindings +mumps +hypre +metis +ptscotch +superlu-dist +suite-sparse +hdf5 +scalapack +fftw +hwloc ^hdf5+mpi ^fftw+mpi
  - py-petsc4py@3.24.0 ^petsc@3.24.0
  # - gmsh ^petsc@3.24.0 ^hdf5+mpi

  repos:
    icesee: ./icesee-spack